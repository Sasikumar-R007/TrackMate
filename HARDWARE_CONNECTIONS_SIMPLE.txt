╔══════════════════════════════════════════════════════════════════════════╗
║           ESP32 + Fingerprint + OLED - COMPLETE WIRING DIAGRAM           ║
╚══════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────┐
│                            ESP32 DevKit                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  [3.3V] ────┬─────────→ OLED VCC                                       │
│             │                                                           │
│  [5V]   ────┼─────────→ Fingerprint VCC (Red Wire)                     │
│             │                                                           │
│  [GND]  ────┼─────┬───→ OLED GND                                       │
│             │     │                                                     │
│             │     ├───→ Fingerprint GND (Black Wire)                   │
│             │     │                                                     │
│             │     ├───→ Entry Button (One Pin)                         │
│             │     │                                                     │
│             │     └───→ Exit Button (One Pin)                          │
│             │                                                           │
│  [GPIO 21]  └─────────→ OLED SDA (I2C Data)                            │
│                                                                          │
│  [GPIO 22]  ──────────→ OLED SCL (I2C Clock)                           │
│                                                                          │
│  [GPIO 16]  ──────────→ Fingerprint TX (Yellow Wire)                   │
│                                                                          │
│  [GPIO 17]  ──────────→ Fingerprint RX (White Wire)                    │
│                                                                          │
│  [GPIO 13]  ──────────→ Entry Button (Other Pin)                       │
│                                                                          │
│  [GPIO 12]  ──────────→ Exit Button (Other Pin)                        │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘

╔══════════════════════════════════════════════════════════════════════════╗
║                         COMPONENT PIN DETAILS                             ║
╚══════════════════════════════════════════════════════════════════════════╝

📌 FINGERPRINT SENSOR (R307/R305)
   ┌──────────┬─────────┬───────────────┐
   │ Sensor   │ Color   │ ESP32 Pin     │
   ├──────────┼─────────┼───────────────┤
   │ VCC      │ Red     │ 5V            │
   │ GND      │ Black   │ GND           │
   │ TX       │ Yellow  │ GPIO 16 (RX2) │
   │ RX       │ White   │ GPIO 17 (TX2) │
   └──────────┴─────────┴───────────────┘

📺 OLED DISPLAY (SSD1306 - I2C)
   ┌──────────┬───────────────┐
   │ Display  │ ESP32 Pin     │
   ├──────────┼───────────────┤
   │ VCC      │ 3.3V          │
   │ GND      │ GND           │
   │ SCL      │ GPIO 22       │
   │ SDA      │ GPIO 21       │
   └──────────┴───────────────┘

🔘 PUSH BUTTONS (2 buttons needed)
   ┌────────────────┬───────────────┐
   │ Button         │ ESP32 Pin     │
   ├────────────────┼───────────────┤
   │ Entry - Pin 1  │ GPIO 13       │
   │ Entry - Pin 2  │ GND           │
   │ Exit - Pin 1   │ GPIO 12       │
   │ Exit - Pin 2   │ GND           │
   └────────────────┴───────────────┘

╔══════════════════════════════════════════════════════════════════════════╗
║                           QUICK START STEPS                               ║
╚══════════════════════════════════════════════════════════════════════════╝

✅ STEP 1: Wire Everything
   - Connect all components as shown in diagram above
   - Double-check VCC and GND connections
   - Ensure no loose wires

✅ STEP 2: Install Software
   - Arduino IDE → Add ESP32 board support
   - Install libraries: Adafruit Fingerprint, ArduinoJson, Adafruit SSD1306, Adafruit GFX

✅ STEP 3: Configure Code (ESP32_OLED_CODE.ino)
   - WiFi name and password
   - Server URL: https://4b51ce65-b9fa-464c-819f-d1babc6d9fb2-00-2r7pir1wexqe4.spock.replit.dev/api/esp32/scan
   - API Key: (from your Replit Secrets - HARDWARE_API_KEY)
   - Bus Number: "Bus-1", "Bus-2", etc.

✅ STEP 4: Upload to ESP32
   - Connect via USB
   - Select ESP32 Dev Module board
   - Select correct COM port
   - Click Upload

✅ STEP 5: Enroll Fingerprints
   - Use: File → Examples → Adafruit Fingerprint → enroll
   - Upload and follow Serial Monitor instructions
   - Assign ID numbers to each student

✅ STEP 6: Link Students
   - Register students in TrackMate web app
   - Update their fingerprint_id in database
   - Match the ID from fingerprint enrollment

✅ STEP 7: Test!
   - Press Entry button → Scan finger
   - Check OLED for student name
   - Verify in web dashboard

╔══════════════════════════════════════════════════════════════════════════╗
║                          TROUBLESHOOTING TIPS                             ║
╚══════════════════════════════════════════════════════════════════════════╝

❌ OLED blank? 
   → Check VCC to 3.3V, verify I2C address (0x3C)

❌ Fingerprint not found?
   → Try swapping TX/RX wires, use 5V for sensor VCC

❌ WiFi won't connect?
   → Use 2.4GHz WiFi, check credentials, move closer to router

❌ Server error?
   → Verify URL and API key match exactly

❌ Button not working?
   → Check GND connection, verify GPIO pins

╔══════════════════════════════════════════════════════════════════════════╗
║                            IMPORTANT NOTES                                ║
╚══════════════════════════════════════════════════════════════════════════╝

⚡ Power Requirements:
   - Fingerprint sensor: 5V (high current draw during scan)
   - OLED display: 3.3V
   - ESP32: Powers from USB (5V)

🔒 Security:
   - API key is in Replit Secrets (never hardcode in uploaded code)
   - All communication is HTTPS encrypted
   - Keep your WiFi credentials secure

📱 Your Current URLs:
   - Web App: https://4b51ce65-b9fa-464c-819f-d1babc6d9fb2-00-2r7pir1wexqe4.spock.replit.dev
   - API Endpoint: /api/esp32/scan

═══════════════════════════════════════════════════════════════════════════

📁 FILES IN THIS PROJECT:
   ✓ ESP32_OLED_CODE.ino - Main code with OLED support (USE THIS!)
   ✓ COMPLETE_HARDWARE_GUIDE.md - Detailed setup guide
   ✓ HARDWARE_CONNECTIONS_SIMPLE.txt - This quick reference
   ✓ HARDWARE_SETUP.md - Original setup guide
   ✓ ESP32_CODE.ino - Code without OLED (basic version)

═══════════════════════════════════════════════════════════════════════════
